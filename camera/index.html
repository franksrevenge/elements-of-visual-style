<!DOCTYPE html>
<html>
<head>
	<title>Camera</title>
	
	<link rel='stylesheet' type='text/css' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/ui-lightness/jquery-ui.min.css' />	
	<link rel='stylesheet' type='text/css' href='http://cdnjs.cloudflare.com/ajax/libs/foundation/4.3.1/css/foundation.min.css' />
	
	
	<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js'></script>
	<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js'></script>
	
	<script src='../lib/FX/Core/Helper.js'></script>
	<script src='../lib/FX/Core/Point2D.js'></script>
	<script src='../lib/FX/Core/Color.js'></script>
	<script src='../lib/FX/Core/Surface.js'></script>
	<script src='../lib/FX/Core/Draw.js'></script>
	<script src='../lib/FX/Core/CanvasTexture.js'></script>
	<script src='../lib/FX/Core/Triangle.js'></script>
	<script src='../lib/FX/Core/Matrix.js'></script>
	
	<script src='../lib/FX/Core/Point3D.js'></script>
	<script src='../lib/FX/Core/Vector3D.js'></script>

	<script src='../lib/FX/3D/Camera.js'></script>
	<script src='../lib/FX/3D/Facet.js'></script>
	<script src='../lib/FX/3D/Material.js'></script>
	<script src='../lib/FX/3D/Mesh.js'></script>
	<script src='../lib/FX/3D/Scene.js'></script>
	<script src='../lib/FX/3D/SimpleCamera.js'></script>
	
	<script src='../lib/FX/3D/Factory/TorusFactory.js'></script>
	<script src='../lib/FX/3D/Factory/CuboidFactory.js'></script>
	<script src='../lib/FX/3D/Factory/SphereFactory.js'></script>
	
	<script src='../lib/FX/3D/Renderer/Renderer.js'></script>
	<script src='../lib/FX/3D/Renderer/VertexRenderer.js'></script>
	<script src='../lib/FX/3D/Renderer/WireframeRenderer.js'></script>
	
	
</head>
<body>
	<div class='row'>
		<div class='twenty columnns'>
			<h1>Camera</h1>
			
			<p>Pure JavaScript implementation of camera projection</p>
		</div>
	</div>	

	<div class='row'>
		<div class='twenty columns'>
			<canvas id='surface' width='640' height='480' style='border: 1px solid #000000;'></canvas>
		</div>
		
		<div id='sceneFPS'>
		</div>
	</div>

	<div class='row'>
		<h4>Z-position</h4>
		
		<div id='inputZPosition'></div>
		
		<script type='text/javascript'>
			$(
				function()
				{
					$( '#inputZPosition' ).slider({
							value		: 50,
							orientation	: 'horizontal',
							min			: 1,
							max			: 500,
							slide		: function()
							{
								mesh.position.z = $( '#inputZPosition' ).slider( 'value' );
							}
						});
				}
			);
		</script>
	</div>
	
	<div class='row'>
		<h4>Perspective Depth</h4>
		
		<div id='inputPerspectiveDepth'></div>
		
		<script type='text/javascript'>
			$(
				function()
				{
					$( '#inputPerspectiveDepth' ).slider({
							value		: 10000,
							orientation	: 'horizontal',
							min			: 1,
							max			: 10000,
							slide		: function()
							{
								camera.perspectiveDepth = $( '#inputPerspectiveDepth' ).slider( 'value' ) / 100;
							}
						});
				}
			);
		</script>
	</div>
	
	
	
<script type='text/javascript'>	
	var surface		= new Surface( 'surface', false );
	
	Draw.setSurface( surface );
	Draw.bgColor.set( 220, 220, 220 );
	Draw.color.set( 0, 0, 0 );

	
	var scene		= new Scene();
	var mesh		= TorusFactory.generate( 250, 250, 250, 100, 0.2 );
	// var mesh		= CuboidFactory.generate( 25, 25, 25, 0.2 );
	
	/*var mesh = new Mesh();
	
	mesh.addVertex( new Point3D( 0, 0, 0 ) );
	mesh.addVertex( new Point3D( 0, 25, 0 ) );*/
	// mesh.addVertex( new Point3D( 25, 0, 0 ) );
	
	
	var camera		= new SimpleCamera();
	
	var camera = new Camera();
	
	
	
	
	
	mesh.position.z = -1200;
	
	scene.addMesh( mesh );
	scene.addCamera( camera );
	
	Draw.beginPaint();
		scene.render();
	Draw.endPaint();
	
	
	function rotateMesh()
	{
		mesh.rotation.z += 0.01;
		mesh.rotation.x += 0.01;
		mesh.rotation.y += 0.01;
		
		Draw.beginPaint();
			scene.render();
		Draw.endPaint();
		
		$( '#sceneFPS' ).html( scene.renderFPS );
	}
	

	setInterval( 
			function()
			{
				if( surface.isDrawing() === false )
				{
					// var curTime	= new Date();					
					// var rad		= ( curTime.getTime() - startTime.getTime() ) / 1000;
				
					rotateMesh();
				}
			},
			25
		);
	
	

	
	$( document ).on( 
			'click', 
			'#drawButton',
			function()
			{
				drawAll( 0 );
			}
		);
	
	
	
	
	
</script>

</body>
</html>

