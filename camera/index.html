<!DOCTYPE html>
<html>
<head>
	<title>Camera</title>
	
	<link rel='stylesheet' type='text/css' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/ui-lightness/jquery-ui.min.css' />	
	<link rel='stylesheet' type='text/css' href='http://cdnjs.cloudflare.com/ajax/libs/foundation/4.3.1/css/foundation.min.css' />

	<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js'></script>
	<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js'></script>
	
	<script data-main='../src/3d-loader'  src='../vendor/require.js'></script>	
</head>
<body>
	<div class='row'>
		<div class='twenty columnns'>
			<h1>Camera</h1>
			
			<p>Pure JavaScript implementation of camera projection</p>
		</div>
	</div>	

	<div class='row'>
		<div class='twenty columns'>
			<canvas id='surface' width='640' height='480' style='border: 1px solid #000000;'></canvas>
		</div>
		
		<div id='sceneFPS'>
		</div>
	</div>

	
<script type='text/javascript'>		
	/**
	 * @type Surface
	 */
	var surface;
	
	/**
	 * @type Scene
	 */
	var scene;
	
	/**
	 * @type Mesh
	 */
	var mesh;
	
	/**
	 * @type Renderer
	 */
	var renderer;
	
	/**
	 * @type Camera
	 */
	var camera;
	
	
	$( document ).on( 
			'EVS:3DLoaded', 
			function()
			{
				surface		= new Surface( 'surface', false );

				Draw.setSurface( surface );
				Draw.bgColor.set( 220, 220, 220 );
				Draw.color.set( 0, 0, 0 );


				scene		= new Scene();
				mesh		= TorusFactory.generate( 250, 250, 250, 100, 0.2 );
				camera		= new MovableCamera();
				// var renderer	= new VertexRenderer();	
				renderer	= new WireframeRenderer();	


				mesh.position.z = -1200;

				scene.addMesh( mesh );
				scene.addCamera( camera );
				scene.addRenderer( renderer );

				/* Draw.beginPaint();
					scene.render();
				Draw.endPaint(); */
	
				setInterval( 
						function()
						{
							if( surface.isDrawing() === false )
							{
								rotateMesh();
							}
						},
						25
					);

		
				$( document ).on( 
						'click', 
						'#drawButton',
						function()
						{
							drawAll( 0 );
						}
					);
			}					
		);

	

	
	function rotateMesh()
	{
		mesh.rotation.z	+= 0.01;
		mesh.rotation.x	+= 0.01;
		mesh.rotation.y	+= 0.01;
		
		Draw.beginPaint();
			scene.render();
		Draw.endPaint();
		
		$( '#sceneFPS' ).html( scene.renderFPS );
	}
	
	
</script>

</body>
</html>

